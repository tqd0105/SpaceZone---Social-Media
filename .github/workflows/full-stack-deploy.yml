name: ğŸ”„ Full Stack Deploy

on:
  push:
    branches: [ main, master ]
  workflow_dispatch:

jobs:
  # Build vÃ  deploy Frontend
  frontend:
    uses: ./.github/workflows/frontend-deploy.yml
    secrets: inherit

  # Build vÃ  test Backend  
  backend:
    uses: ./.github/workflows/backend-deploy.yml
    secrets: inherit

  # Notification job
  notify:
    runs-on: ubuntu-latest
    needs: [frontend, backend]
    if: always()
    
    steps:
      - name: ğŸ“¢ Deployment Status
        run: |
          if [[ "${{ needs.frontend.result }}" == "success" && "${{ needs.backend.result }}" == "success" ]]; then
            echo "âœ… Both Frontend vÃ  Backend deployed successfully!"
          elif [[ "${{ needs.frontend.result }}" == "success" ]]; then
            echo "âœ… Frontend deployed successfully!"
            echo "âŒ Backend deployment failed!"
          elif [[ "${{ needs.backend.result }}" == "success" ]]; then
            echo "âŒ Frontend deployment failed!"
            echo "âœ… Backend deployed successfully!"
          else
            echo "âŒ Both deployments failed!"
          fi